<!-- education-form.component.html -->
<div id="uploadResumeStepEducation" class="card active shadow-lg" style="display: block; opacity: 1.0275;">
  <!-- Header -->
  <div class="card-header bg-img-start bg-primary" style="background-image: url(../assets/svg/components/card-1.svg);">
    <div class="flex-grow-1">
      <span class="d-lg-none">Step 2 of 5</span>
      <h3 class="card-header-title text-white">Education</h3>
    </div>
  </div>
  <!-- End Header -->

  <!-- Body -->
  <div class="card-body">
    <form [formGroup]="educationForm" (ngSubmit)="onSubmit()">
      <!-- Primary Education Section -->
      <div class="mb-4">
        <h5 class="mb-3">Primary Education</h5>

        <!-- Education Level -->
        <div class="mb-4">
          <label for="educationLabel" class="form-label">Education</label>
          <select id="educationLabel" class="form-select" formControlName="educationLevel">
            <option *ngFor="let level of educationLevels" [value]="level.value">{{level.label}}</option>
          </select>
        </div>

        <!-- Field of Study -->
        <div class="mb-4">
          <label for="fieldOfStudyNameLabel" class="form-label">Field of study</label>
          <input type="text" class="form-control" formControlName="fieldOfStudy"
                 id="fieldOfStudyNameLabel" placeholder="Accounting" aria-label="Accounting">
        </div>

        <!-- School Name -->
        <div class="mb-4">
          <label for="schoolNameLabel" class="form-label">School</label>
          <input type="text" class="form-control" formControlName="schoolName"
                 id="schoolNameLabel" placeholder="University of Oxford" aria-label="University of Oxford">
        </div>

        <!-- Country -->
        <div class="mb-4">
          <label for="educationCountryLabel" class="form-label">Country</label>
          <select id="educationCountryLabel" class="form-select" formControlName="country">
            <option *ngFor="let country of countries" [value]="country.code">{{country.name}}</option>
          </select>
        </div>

        <!-- Currently Enrolled -->
        <div class="mb-4">
          <label for="schoolTimePeriodCheckbox" class="form-label">Time period</label>
          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="schoolTimePeriodCheckbox"
                   formControlName="currentlyEnrolled">
            <label class="form-check-label" for="schoolTimePeriodCheckbox">Currently enrolled</label>
          </div>
        </div>

        <!-- Start Date -->
        <div class="mb-4">
          <label for="schoolFromMonthLabel" class="form-label">From</label>
          <div class="row gx-2">
            <div class="col-sm-8 mb-2 mb-sm-0">
              <select id="schoolFromMonthLabel" class="form-select" formControlName="startMonth">
                <option *ngFor="let month of months" [value]="month.value">{{month.name}}</option>
              </select>
            </div>
            <div class="col-sm-4">
              <select class="form-select" formControlName="startYear">
                <option *ngFor="let year of years" [value]="year">{{year}}</option>
              </select>
            </div>
          </div>
        </div>

        <!-- End Date (Conditional) -->
        <div class="mb-4" *ngIf="!educationForm.get('currentlyEnrolled')?.value">
          <label class="form-label">To</label>
          <div class="row gx-2">
            <div class="col-sm-8 mb-2 mb-sm-0">
              <select class="form-select" formControlName="endMonth">
                <option *ngFor="let month of months" [value]="month.value">{{month.name}}</option>
              </select>
            </div>
            <div class="col-sm-4">
              <select class="form-select" formControlName="endYear">
                <option *ngFor="let year of years" [value]="year">{{year}}</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- Additional Education Section -->
      <div class="additional-education-section">
        <h5 class="mb-3">Additional Education</h5>

        <div formArrayName="additionalEducations">
          <div *ngFor="let education of additionalEducations.controls; let i = index"
               [formGroupName]="i" class="additional-education-item mb-4 p-3 border rounded">
            <hr *ngIf="i > 0">

            <!-- Education Level -->
            <div class="mb-3">
              <label class="form-label">Education</label>
              <select class="form-select" formControlName="educationLevel">
                <option *ngFor="let level of educationLevels" [value]="level.value">{{level.label}}</option>
              </select>
            </div>

            <!-- Field of Study -->
            <div class="mb-3">
              <label [for]="'addFieldOfStudyNameLabel' + i" class="form-label">Field of study</label>
              <input type="text" class="form-control" formControlName="fieldOfStudy"
                     [id]="'addFieldOfStudyNameLabel' + i" placeholder="Accounting" aria-label="Accounting">
            </div>

            <!-- School Name -->
            <div class="mb-3">
              <label [for]="'addSchoolNameLabel' + i" class="form-label">School</label>
              <input type="text" class="form-control" formControlName="schoolName"
                     [id]="'addSchoolNameLabel' + i" placeholder="University of Oxford" aria-label="University of Oxford">
            </div>

            <!-- Country -->
            <div class="mb-3">
              <label class="form-label">Country</label>
              <select class="form-select" formControlName="country">
                <option *ngFor="let country of countries" [value]="country.code">{{country.name}}</option>
              </select>
            </div>

            <!-- Currently Enrolled -->
            <div class="mb-3">
              <label [for]="'addSchoolTimePeriodCheckbox' + i" class="form-label">Time period</label>
              <div class="form-check">
                <input type="checkbox" class="form-check-input"
                       [id]="'addSchoolTimePeriodCheckbox' + i" formControlName="currentlyEnrolled">
                <label class="form-check-label" [for]="'addSchoolTimePeriodCheckbox' + i">Currently enrolled</label>
              </div>
            </div>

            <!-- Start Date -->
            <div class="mb-3">
              <label class="form-label">From</label>
              <div class="row gx-2">
                <div class="col-sm-8 mb-2 mb-sm-0">
                  <select class="form-select" formControlName="startMonth">
                    <option *ngFor="let month of months" [value]="month.value">{{month.name}}</option>
                  </select>
                </div>
                <div class="col-sm-4">
                  <select class="form-select" formControlName="startYear">
                    <option *ngFor="let year of years" [value]="year">{{year}}</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- End Date (Conditional) -->
            <div class="mb-3" *ngIf="!education.get('currentlyEnrolled')?.value">
              <label class="form-label">To</label>
              <div class="row gx-2">
                <div class="col-sm-8 mb-2 mb-sm-0">
                  <select class="form-select" formControlName="endMonth">
                    <option *ngFor="let month of months" [value]="month.value">{{month.name}}</option>
                  </select>
                </div>
                <div class="col-sm-4">
                  <select class="form-select" formControlName="endYear">
                    <option *ngFor="let year of years" [value]="year">{{year}}</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Remove Button -->
            <button type="button" class="btn btn-outline-danger btn-sm" (click)="removeAdditionalEducation(i)">
              <i class="bi-trash me-1"></i> Remove
            </button>
          </div>
        </div>

        <!-- Add Education Button -->
        <button type="button" class="btn btn-outline-primary mt-2" (click)="addAdditionalEducation()">
          <i class="bi-plus-circle me-1"></i> Add education
        </button>
      </div>

      <!-- Footer -->
      <div class="card-footer pt-0 mt-4">
        <div class="d-flex align-items-center">
          <button type="button" class="btn btn-ghost-secondary" (click)="goToPreviousStep()">
            <i class="bi-chevron-left small ms-1"></i> Previous step
          </button>

          <div class="ms-auto">
            <button type="submit" class="btn btn-primary">
              Save and continue <i class="bi-chevron-right small ms-1"></i>
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
