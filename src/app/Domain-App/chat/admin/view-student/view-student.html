<app-header-poly></app-header-poly>

<!-- Full page container -->
<div class="d-flex flex-column" style="height: 100vh; overflow: hidden;">

  <!-- Main content area -->
  <div class="container-fluid content-space-3 flex-grow-1 overflow-auto">


    <!-- Table Card -->
    <div class="card">
      <div class="card-header card-header-content-md-between">
        <div class="mb-2 mb-md-0">
          <form>
            <div class="input-group input-group-merge input-group-flush">
              <div class="input-group-prepend input-group-text">
                <i class="bi-search"></i>
              </div>
              <input id="datatableSearch" type="search" class="form-control" placeholder="Search users" aria-label="Search users">
            </div>
          </form>
        </div>
      </div>

      <div class="table-responsive" style="overflow-x: auto;">
        <table class="table table-lg table-borderless table-thead-bordered table-nowrap table-align-middle card-table dataTable no-footer">
          <thead class="thead-light">
          <tr>
            <th>Reg No</th>
            <th>Name</th>
            <th>Email</th>
            <th>Gender</th>
            <th>Department</th>
            <th>Course</th>
            <th>State</th>
            <th>LGA</th>
            <th>Actions</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let s of students$ | async">
            <ng-container *ngIf="editingStudent === s.id; else viewMode">
              <td>{{ s.id }}</td>
              <td><input [(ngModel)]="updatedData.name" class="form-control" /></td>
              <td><input [(ngModel)]="updatedData.email" class="form-control" /></td>
              <td>
                <select [(ngModel)]="updatedData.gender" class="form-control">
                  <option>Male</option>
                  <option>Female</option>
                </select>
              </td>
              <td><input [(ngModel)]="updatedData.department" class="form-control" /></td>
              <td><input [(ngModel)]="updatedData.course" class="form-control" /></td>
              <td><input [(ngModel)]="updatedData.state" class="form-control" /></td>
              <td><input [(ngModel)]="updatedData.lga" class="form-control" /></td>
              <td>
                <button class="btn btn-success btn-sm me-2" (click)="updateStudent(s.id)">Save</button>
                <button class="btn btn-secondary btn-sm" (click)="cancelEdit()">Cancel</button>
              </td>
            </ng-container>

            <ng-template #viewMode>
              <td>{{ s.id }}</td>
              <td>{{ s.name }}</td>
              <td>{{ s.email }}</td>
              <td>{{ s.gender }}</td>
              <td>{{ s.department }}</td>
              <td>{{ s.course }}</td>
              <td>{{ s.state }}</td>
              <td>{{ s.lga }}</td>
              <td>
                <button class="btn btn-primary btn-sm me-2" (click)="editStudent(s)">Edit</button>
                <button class="btn btn-danger btn-sm" (click)="deleteStudent(s.id)">Delete</button>
              </td>
            </ng-template>
          </tr>
          </tbody>
        </table>
      </div>

      <div class="card-footer">
        <div class="row justify-content-center justify-content-sm-between align-items-sm-center">
          <div class="col-sm-auto">
            <nav id="datatablePagination" aria-label="Activity pagination">
              <ul class="pagination datatable-custom-pagination">
                <li class="page-item disabled"><a class="page-link">Prev</a></li>
                <li class="page-item"><a class="page-link">1</a></li>
                <li class="page-item"><a class="page-link">2</a></li>
                <li class="page-item"><a class="page-link">Next</a></li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
    <!-- End Table Card -->

  </div>
</div>
