<div class="card">
  <div class="card-header card-header-content-between">
    <h4 class="card-header-title">Departments</h4>

  </div>

  <div class="table-responsive"  >
    <table class="table table-borderless table-thead-bordered table-nowrap table-align-middle card-table mb-0">
      <thead class="thead-light" style="display: table; width: 100%; table-layout: fixed;">
      <tr>
        <th>Name</th>

      </tr>
      </thead>

      <tbody style="display: block; max-height: 400px; overflow-y: auto; width: 100%;">
      <tr *ngFor="let dept of departments$ | async; let i = index"  >
        <td>
          <div class="d-flex align-items-center">
            <div class="avatar avatar-circle me-3" [ngClass]="getAvatarColor(i)">
              <span class="avatar-initials">{{ getInitials(dept.departmentName) }}</span>
            </div>
            <div>
              <h5 class="mb-0">{{ dept.departmentName }}</h5>
              <small>{{ dept.createdAt | date:'mediumDate' }}</small>
            </div>
          </div>
        </td>

        <td class="d-flex gap-2">
          <button class="btn btn-info btn-sm" (click)="viewDepartment(dept)">View</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>



<div *ngIf="showModal" class="modal-overlay">
  <app-modal [width]="'600px'" [height]="'500px'" (click)="closeModal()">
    <div class="p-3" style="max-height: 450px; overflow-y: auto;">
      <h4 class="mb-3 text-center">{{ modalDepartment?.departmentName }}</h4>
      <table class="table table-bordered table-striped">
        <tbody>
        <tr>
          <th scope="row">Code</th>
          <td>{{ modalDepartment?.departmentCode }}</td>
        </tr>
        <tr>
          <th scope="row">Faculty</th>
          <td>{{ modalDepartment?.faculty }}</td>
        </tr>
        <tr>
          <th scope="row">HOD</th>
          <td>{{ modalDepartment?.headOfDepartment }}</td>
        </tr>
        <tr>
          <th scope="row">Established</th>
          <td>{{ modalDepartment?.establishedYear }}</td>
        </tr>
        <tr>
          <th scope="row">Phone</th>
          <td>{{ modalDepartment?.phone }}</td>
        </tr>
        <tr>
          <th scope="row">Email</th>
          <td>{{ modalDepartment?.contactEmail }}</td>
        </tr>
        <tr>
          <th scope="row">Website</th>
          <td><a [href]="modalDepartment?.website" target="_blank">{{ modalDepartment?.website }}</a></td>
        </tr>
        <tr>
          <th scope="row">Description</th>
          <td>{{ modalDepartment?.description }}</td>
        </tr>
        </tbody>
      </table>

      <div class="text-end mt-2">
        <button class="btn btn-danger btn-sm" (click)="deleteDepartment(modalDepartment?.id)">Delete</button>
        <button class="btn btn-secondary btn-sm ms-2" (click)="closeModal()">Close</button>
      </div>
    </div>
  </app-modal>

</div>

