<!--
<div class="container mt-4">
  <h2 class="mb-3">Loan Application</h2>

  <form [formGroup]="loanForm" (ngSubmit)="onSubmit()" class="row g-3">

    &lt;!&ndash; Loan Amount &ndash;&gt;
    <div class="col-md-6">
      <label class="form-label">Loan Amount</label>
      <input type="number" class="form-control" formControlName="amount" placeholder="Enter amount" required>
    </div>

    &lt;!&ndash; Loan Purpose &ndash;&gt;
    <div class="col-md-6">
      <label class="form-label">Purpose</label>
      <input type="text" class="form-control" formControlName="purpose" placeholder="e.g. Business, Education" required>
    </div>

    &lt;!&ndash; Loan Term &ndash;&gt;
    <div class="col-md-4">
      <label class="form-label">Loan Term (Months)</label>
      <input type="number" class="form-control" formControlName="term" placeholder="e.g. 12" required>
    </div>

    &lt;!&ndash; Interest Rate &ndash;&gt;
    <div class="col-md-4">
      <label class="form-label">Preferred Interest Rate (%)</label>
      <input type="number" class="form-control" formControlName="interestRate" placeholder="e.g. 5" required>
    </div>

    &lt;!&ndash; Repayment Method &ndash;&gt;
    <div class="col-md-4">
      <label class="form-label">Repayment Method</label>
      <select class="form-select" formControlName="repaymentMethod" required>
        <option value="" disabled selected>Select...</option>
        <option>Monthly</option>
        <option>Quarterly</option>
        <option>Yearly</option>
      </select>
    </div>

    &lt;!&ndash; Collateral &ndash;&gt;
    <div class="col-md-6">
      <label class="form-label">Collateral</label>
      <input type="text" class="form-control" formControlName="collateral" placeholder="e.g. Car, Land, House">
    </div>

    &lt;!&ndash; Employment Status &ndash;&gt;
    <div class="col-md-6">
      <label class="form-label">Employment Status</label>
      <select class="form-select" formControlName="employmentStatus" required>
        <option value="" disabled selected>Select...</option>
        <option>Employed</option>
        <option>Self-Employed</option>
        <option>Unemployed</option>
        <option>Student</option>
        <option>Retired</option>
      </select>
    </div>

    &lt;!&ndash; Monthly Income &ndash;&gt;
    <div class="col-md-6">
      <label class="form-label">Monthly Income</label>
      <input type="number" class="form-control" formControlName="income" placeholder="e.g. 2000" required>
    </div>

    &lt;!&ndash; Existing Debts &ndash;&gt;
    <div class="col-md-6">
      <label class="form-label">Existing Debts</label>
      <input type="number" class="form-control" formControlName="debts" placeholder="e.g. 5000">
    </div>

    &lt;!&ndash; Preferred Start Date &ndash;&gt;
    <div class="col-md-6">
      <label class="form-label">Preferred Start Date</label>
      <input type="date" class="form-control" formControlName="startDate" required>
    </div>

    &lt;!&ndash; Notes &ndash;&gt;
    <div class="col-md-12">
      <label class="form-label">Additional Notes</label>
      <textarea class="form-control" rows="3" formControlName="notes" placeholder="Any special request or note..."></textarea>
    </div>

    &lt;!&ndash; Submit &ndash;&gt;
    <div class="col-12">
      <button class="btn btn-primary" type="submit" [disabled]="loanForm.invalid">Apply</button>
    </div>
  </form>

  <div class="mt-3" *ngIf="submitted">
    <h5>Application Submitted</h5>
    <pre>{{ loanForm.value | json }}</pre>
  </div>
</div>
<form [formGroup]="loanForm" (ngSubmit)="onSubmit()" novalidate>


  <hr />


  &lt;!&ndash; Collateral &ndash;&gt;
  <div class="mb-3">
    <h5>Collateral (if secured)</h5>


    <div class="form-check mb-2">
      <input class="form-check-input" type="checkbox" id="securedCheck" [checked]="isSecured()" (change)="toggleSecured($event)" />
      <label class="form-check-label" for="securedCheck">This loan is secured (has collateral)</label>
    </div>


    <div *ngIf="isSecured()" class="border rounded p-3">
      <div formArrayName="collaterals">
        <div *ngFor="let coll of collaterals.controls; let i = index" [formGroupName]="i" class="mb-3">
          <div class="row align-items-end">
            <div class="col-md-4">
              <label class="form-label">Type (Property / Car / Other)</label>
              <input class="form-control" formControlName="type" />
            </div>
            <div class="col-md-4">
              <label class="form-label">Description</label>
              <input class="form-control" formControlName="description" />
            </div>
            <div class="col-md-3">
              <label class="form-label">Estimated Value (NGN)</label>
              <input type="number" class="form-control" formControlName="value" />
            </div>
            <div class="col-md-1 text-end">
              <button type="button" class="btn btn-danger btn-sm" (click)="removeCollateral(i)">×</button>
            </div>
          </div>
        </div>
      </div>


      <button type="button" class="btn btn-outline-primary btn-sm" (click)="addCollateral()">Add collateral</button>
    </div>
  </div>


  <hr />


  &lt;!&ndash; Internal Assessment (calculated) &ndash;&gt;
  <div class="mb-3">
    <h5>Internal assessment (calculated)</h5>


    <div class="row">
      <div class="col-md-3 mb-2">
        <label class="form-label">Debt-to-Income Ratio (DTI)</label>
        <div class="form-control-plaintext">{{ dti() | number:'1.0-2' }}</div>
      </div>


      <div class="col-md-3 mb-2">
        <label class="form-label">Estimated Monthly Repayment</label>
        <div class="form-control-plaintext">{{ estimatedMonthlyRepayment() | number:'1.0-2' }}</div>
      </div>


      <div class="col-md-3 mb-2">
        <label class="form-label">Suggested Approval</label>
        <div class="form-control-plaintext">
          <span [class.text-success]="suggestedApproval" [class.text-danger]="!suggestedApproval">{{ suggestedApproval ? 'Approve' : 'Decline' }}</span>
        </div>
      </div>


      <div class="col-md-3 mb-2">
        <label class="form-label">Reason</label>
        <div class="form-control-plaintext small text-muted">{{ suggestionReason }}</div>
      </div>
    </div>
  </div>


  <div class="d-flex justify-content-end">
    <button type="submit" class="btn btn-primary" [disabled]="loanForm.invalid">Submit assessment</button>
  </div>
</form>
-->
<div class="container mt-4">
  <h2 class="mb-3">Loan Application</h2>

  <form [formGroup]="loanForm" (ngSubmit)="onSubmit()" class="row g-3" novalidate>

    <!-- Loan Amount -->
    <div class="col-md-6">
      <label class="form-label">Loan Amount</label>
      <input type="number" class="form-control" formControlName="amount" placeholder="Enter amount" required>
    </div>

    <!-- Loan Purpose -->
    <div class="col-md-6">
      <label class="form-label">Purpose</label>
      <input type="text" class="form-control" formControlName="purpose" placeholder="e.g. Business, Education" required>
    </div>

    <!-- Loan Term -->
    <div class="col-md-4">
      <label class="form-label">Loan Term (Months)</label>
      <input type="number" class="form-control" formControlName="term" placeholder="e.g. 12" required>
    </div>

    <!-- Interest Rate -->
    <div class="col-md-4">
      <label class="form-label">Preferred Interest Rate (%)</label>
      <input type="number" class="form-control" formControlName="interestRate" placeholder="e.g. 5" required>
    </div>

    <!-- Repayment Method -->
    <div class="col-md-4">
      <label class="form-label">Repayment Method</label>
      <select class="form-select" formControlName="repaymentMethod" required>
        <option value="" disabled selected>Select...</option>
        <option>Monthly</option>
        <option>Quarterly</option>
        <option>Yearly</option>
      </select>
    </div>

    <!-- Employment Status -->
    <div class="col-md-6">
      <label class="form-label">Employment Status</label>
      <select class="form-select" formControlName="employmentStatus" required>
        <option value="" disabled selected>Select...</option>
        <option>Employed</option>
        <option>Self-Employed</option>
        <option>Unemployed</option>
        <option>Student</option>
        <option>Retired</option>
      </select>
    </div>

    <!-- Monthly Income -->
    <div class="col-md-6">
      <label class="form-label">Monthly Income</label>
      <input type="number" class="form-control" formControlName="income" placeholder="e.g. 2000" required>
    </div>

    <!-- Existing Debts -->
    <div class="col-md-6">
      <label class="form-label">Existing Debts</label>
      <input type="number" class="form-control" formControlName="debts" placeholder="e.g. 5000">
    </div>

    <!-- Preferred Start Date -->
    <div class="col-md-6">
      <label class="form-label">Preferred Start Date</label>
      <input type="date" class="form-control" formControlName="startDate" required>
    </div>

    <!-- Notes -->
    <div class="col-md-12">
      <label class="form-label">Additional Notes</label>
      <textarea class="form-control" rows="3" formControlName="notes" placeholder="Any special request or note..."></textarea>
    </div>

    <hr class="mt-4"/>

    <!-- Collateral -->
    <div class="mb-3">
      <h5>Collateral (if secured)</h5>

      <div class="form-check mb-2">
        <input class="form-check-input" type="checkbox" id="securedCheck"
               [checked]="isSecured()"  />
        <label class="form-check-label" for="securedCheck">This loan is secured (has collateral)</label>
      </div>

      <div *ngIf="isSecured()" class="border rounded p-3">
        <div formArrayName="collaterals">
          <div *ngFor="let coll of collaterals.controls; let i = index" [formGroupName]="i" class="mb-3">
            <div class="row align-items-end">
              <div class="col-md-4">
                <label class="form-label">Type (Property / Car / Other)</label>
                <input class="form-control" formControlName="type" />
              </div>
              <div class="col-md-4">
                <label class="form-label">Description</label>
                <input class="form-control" formControlName="description" />
              </div>
              <div class="col-md-3">
                <label class="form-label">Estimated Value (NGN)</label>
                <input type="number" class="form-control" formControlName="value" />
              </div>
              <div class="col-md-1 text-end">
                <button type="button" class="btn btn-danger btn-sm" >×</button>
              </div>
            </div>
          </div>
        </div>

        <button type="button" class="btn btn-outline-primary btn-sm" >Add collateral</button>
      </div>
    </div>

    <hr class="mt-4"/>

    <!-- Internal Assessment -->
    <div class="mb-3">
      <h5>Internal Assessment (calculated)</h5>

      <div class="row">
        <div class="col-md-3 mb-2">
          <label class="form-label">Debt-to-Income Ratio (DTI)</label>
          <div class="form-control-plaintext">{{ dti() | number:'1.0-2' }}</div>
        </div>

        <div class="col-md-3 mb-2">
          <label class="form-label">Estimated Monthly Repayment</label>
          <div class="form-control-plaintext">{{ estimatedMonthlyRepayment() | number:'1.0-2' }}</div>
        </div>

        <div class="col-md-3 mb-2">
          <label class="form-label">Suggested Approval</label>
          <div class="form-control-plaintext">
            <span [class.text-success]="suggestedApproval"
                  [class.text-danger]="!suggestedApproval">
              {{ suggestedApproval ? 'Approve' : 'Decline' }}
            </span>
          </div>
        </div>

        <div class="col-md-3 mb-2">
          <label class="form-label">Reason</label>
          <div class="form-control-plaintext small text-muted">{{ suggestionReason }}</div>
        </div>
      </div>
    </div>

    <!-- Submit -->
    <div class="d-flex justify-content-end">
      <button type="submit" class="btn btn-primary" [disabled]="loanForm.invalid">Submit Application</button>
    </div>
  </form>

  <div class="mt-3" >
    <h5>Application Submitted</h5>
    <pre>{{ loanForm.value | json }}</pre>
  </div>
</div>
