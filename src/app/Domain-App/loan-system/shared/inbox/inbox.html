<!-- email-list.component.html -->
<div class="container mt-4">
  <div class="input-group mb-3">
    <input type="text" [(ngModel)]="selectedMail" class="form-control" placeholder="Enter email (collection name)">
    <button class="btn btn-primary" (click)="loadCollection()">Load Collection</button>
  </div>

  <div *ngIf="emailDocs$ | async as emailDocs">
    <table class="table table-bordered table-hover">
      <thead class="table-dark">
      <tr>
        <th>#</th>
        <th>Mail</th>
        <th>Subject</th>
        <th>Message</th>
        <th>Attachments</th>
        <th>Created At</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let doc of emailDocs; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ doc.mail }}</td>
        <td>{{ doc.subject }}</td>
        <td>{{ doc.message }}</td>
        <td>
          <ul class="list-unstyled mb-0">
            <li *ngFor="let att of doc.attachments">
              <strong>{{ att.type }}:</strong> {{ att.value }}
            </li>
          </ul>
        </td>
        <td>{{ doc.createdAt?.toDate ? (doc.createdAt.toDate() | date:'short') : doc.createdAt }}</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
